<mat-card class="form_cards pingDataSourceMain">
  <mat-toolbar
    class="mat-toolbar_all mat-toolbar details-toolbar mat-toolbar-single-row" [class.activeID]="isActivePd">

    <mat-card-title class="sidebar_form_title matCardTitles">
      {{"SOAP DISPENSER SENSOR"}}<small *ngIf="isActivePdSmall">{{datasourceTitleName}}</small>
    </mat-card-title>
  </mat-toolbar>
  <div class="mat-content">
    <div *ngFor="let error of pingDataSoureceError" [hidden]="!messageError">
      <mat-card class="validation-error">
        <li>{{error.property}} : {{error.message}}</li>
      </mat-card>
    </div>
    <mat-tab-group animationDuration="0ms" [selectedIndex]="tabIndex">
      <mat-tab label="Properties">
        <p>
          <mat-form-field class="w-50 modbusInputField" appearance="fill">
            <mat-label>
              {{UIDICTIONARY ? UIDICTIONARY.get('ui.core.common.placeholder.name'): ""}}
            </mat-label>
            <input matInput  name="name" [(ngModel)]="soapDatasource.name" type="text">
          </mat-form-field>
          <mat-form-field class="w-50 modbusInputField marginTop"  appearance="fill">
            <mat-label> {{UIDICTIONARY ? UIDICTIONARY.get('ui.core.common.placeholder.exportId'): ""}}</mat-label>
            <input matInput  name="slaveId" [(ngModel)]="soapDatasource.xid" class="datasourceBoxHeight" type="text" required readonly placeholder="Autogenerated">
          </mat-form-field>
        </p>
        <p>
          <mat-form-field class="w-50 modbusInputField" appearance="fill">
            <mat-label>
              {{UIDICTIONARY ? UIDICTIONARY.get('ui.core.modbusControllerSlaveDevice.fields.pollingInterval'): ""}}
            </mat-label>
            <input matInput  class="form-control" name="timePeriod" [(ngModel)]="timePeriodAll.timePeriod"
                   type="text" required>
          </mat-form-field>
          <mat-form-field class="w-50" appearance="fill">
            <mat-label>
              {{UIDICTIONARY ? UIDICTIONARY.get('ui.core.modbusControllerSlaveDevice.fields.pollingInterval'): ""}} {{UIDICTIONARY ? UIDICTIONARY.get('ui.core.dataPoint.textRender.type'): ""}}
            </mat-label>
            <mat-select  class="form-control"
                         name="timePeriodType" [(ngModel)]="timePeriodAll.timePeriodType">
              <mat-option *ngFor = "let timeperiod of timePeriods"  [value]="timeperiod.value" >{{timeperiod.key}}
              </mat-option>
            </mat-select>
          </mat-form-field>

        </p>
        <p>
          <mat-form-field class="w-50"  appearance="fill">
            <mat-label>{{UIDICTIONARY ? UIDICTIONARY.get('ui.core.common.heading.permissions'): ""}}</mat-label>
            <mat-select name="editPermission" [(ngModel)]="editPermission" multiple>
              <mat-option *ngFor="let read of readPermission" [value]="read">{{read}}</mat-option>
            </mat-select>
          </mat-form-field>
        </p>
        <p>
          <button #updateButton mat-raised-button class="updateButton"  (click)="updateDatasource()"  *ngIf="datasourceIsEdit">{{UIDICTIONARY ? (UIDICTIONARY.get('ui.core.common.button.update') | uppercase) : ""}}</button>
          <button #saveButton mat-raised-button class="saveButton"  (click)="saveDatasource()" *ngIf="!datasourceIsEdit" >{{UIDICTIONARY ? (UIDICTIONARY.get('ui.core.common.button.save') |  uppercase) : ""}}</button>
        </p>
      </mat-tab>

      <mat-tab label="Points" [disabled]="!datapointForm">
        <div class="sidebar-form" *ngIf="displayForm">
          <p>
            <mat-form-field class="form_field allInputsMargin w-50" appearance="fill">
              <mat-label>  {{UIDICTIONARY ? UIDICTIONARY.get('ui.core.common.placeholder.exportId'): ""}}</mat-label>
              <input readonly matInput [(ngModel)]="dataPointModel.xid"
                     name="xid" placeholder="xid" class="datasourceBoxHeight">
            </mat-form-field>
            <mat-form-field class="form_field w-50" appearance="fill">
              <mat-label>{{UIDICTIONARY ? UIDICTIONARY.get('ui.core.common.placeholder.name'): ""}}</mat-label>
              <input matInput [(ngModel)]="dataPointModel.name"
                     name="name" type="text" required placeholder="Name">
            </mat-form-field>
          </p>
          <p>
            <mat-form-field class="form_field allInputsMargin w-50" appearance="fill">
              <mat-label> {{UIDICTIONARY ? UIDICTIONARY.get('ui.core.snmp.setType.ipAddress'): ""}}</mat-label>
              <input  matInput [(ngModel)]="soapPointLocatorModel.ipAddress"
                      name="ipaddress" placeholder="ipaddress">
            </mat-form-field>
            <mat-form-field class="form_field w-50" appearance="fill">
              <mat-label>{{UIDICTIONARY ? UIDICTIONARY.get('ui.core.bacnet.fields.placeholder.timeOut'): ""}}</mat-label>
              <input matInput [(ngModel)]="soapPointLocatorModel.timeout"
                     name="timeout" type="text" required placeholder="timeout">
            </mat-form-field>
          </p>
          <div class="meshActionsButtons">
            <button  mat-raised-button class="allDataPointSaveButton mupdateButton"
                     (click)="saveDataPoint()"  *ngIf="isEdit"> {{UIDICTIONARY ? (UIDICTIONARY.get('ui.core.common.button.save') |  uppercase) : ""}}</button>

            <button  mat-raised-button class="Update_Button mupdateButton "
                     (click)="updateDataPoint()"    *ngIf="!isEdit" >{{UIDICTIONARY ? (UIDICTIONARY.get('ui.core.common.button.update') | uppercase) : ""}}</button>

          </div>
          <button mat-raised-button (click)="cancelDataPoint()" class="cancel_button_new cancelPoint marginLeft-88">{{UIDICTIONARY ? (UIDICTIONARY.get('ui.core.common.button.cancel') | uppercase) : ""}}</button>
        </div>
        <app-datapoint-table (editPoint)="editDataPoint($event)"
                             (addPoint)="addNewDatapoint($event, 1)">
        </app-datapoint-table>
      </mat-tab>
    </mat-tab-group>
  </div>
</mat-card>
